objects:
  - recipient: Individual
---
mandatory: True
event: welcome_screen
question: Welcome screen
subquestion: |
  This is the Refusal Report System Against Assitance Animals. The app will guide you through a series of questions to generate a report to help document acts of discrimination.

  **Disclaimer: The report generated from this application summarises a complaint consisting basic information. This application does not give legal advice.**
buttons:
  - I agree and wish to continue: continue
  - No I do not agree and wish to exit: exit
---
mandatory: True
code: |
  from datetime import date
  from datetime import datetime
  now = datetime.now()
  todays_date = str(date.today())
  current_time = now.strftime("%H:%M:%S")
  
  if(submitter == "myself"):
    phonenumberquestion = "What is your phone number?"
    emailquestion = "What is your email address?"
    pronoun = "you"
    pz_fname = s_fname
    pz_lname = s_lname
  else:
    phonenumberquestion = "What is the phone number of the refused person?"
    emailquestion = "What is the email address of the refused person?"
    pronoun = "they"
    s_fname
    s_lname
    pz_fname
    pz_lname
  
  pz_phoneno
  pz_email
  
  #email
  recipient.name.first = pz_fname
  recipient.name.last = pz_lname
  recipient.email = pz_email
  #send_email(to=recipient, template=notification)
  
  
  if(transportOption == "other"):
   transportType
  elif(transportOption == "hotel"):
   acco_StoreName
  acco_Address # Same question as other address details
  inc_date
  inc_time
  if(staffHasReason):
   staffReason
  if(staffRequestedPaperwork):
    IDWasShown
    if(IDWasShown == False):
      notUnlawful
      if(notUnlawful == 'exit'):
        command('exit')
  if(supporting_evidence):
    attached_evidence
  else:
    attached_evidence = False
    
  #review_screen
  
    
  

---
question: Who is reporting the incident?
field: submitter
buttons:
  - Myself: myself
  - Partner: partner
  - Friend: friend
  - Carer: carer
  - Relative: relative
  - Other: other
---
question: Please enter the full name of the person who has been refused accomodation?
fields:
  - First Name: pz_fname
    default: |
      Peter
  - Last Name: pz_lname
    default: |
      Zhao
---
question: What is your full name?
fields:
  - First Name: s_fname
    default: |
      Steve
  - Last Name: s_lname
    default: |
      Johnson
---
question: ${phonenumberquestion}
fields:
  - Phone Number: pz_phoneno
    default: |
      0410929811
---
question: ${emailquestion}
fields:
  - Email: pz_email
    default: |
      pzhao25@gmail.com
---
question: "Which kind of accomodation were ${pronoun} trying to use when ${pronoun} were refused?"
subquestion: "Please state the type of accomodation they were refused from. You can also write any other details about who refused them."
fields:
  - Accomodation Type: transportType
  - Person/Organisation: transportOrg
    required: False
---
question: "What was the name of the accomodation which ${pronoun} were refused entry from?"
fields: 
  - Accomodation: acco_StoreName
---
question: "What is the address of the accomodation?"
fields: 
  - Address: acco_Address
  - City: acco_City
  - State: acco_State
    choices:
      - ACT
      - NSW
      - NT
      - QLD
      - SA
      - TAS
      - VIC
      - WA
  - Postcode: acco_Postcode
---
question: "Which kind of accomodation were ${pronoun} trying to use when ${pronoun} were refused?"
field: transportOption
buttons:
  - Airbnb: airbnb
  - Hotel: hotel
  - Rental: rental
  - Other: other
---
question: "Was a reason for refusal provided?"
yesno: staffHasReason
---
question: "What was the reason for refusal?"
fields:
  - Details: staffReason
    input type: area
---
question: "Was accreditation for the Assistance Animal requested?"
yesno: staffRequestedPaperwork
---
question: "Was accreditation for the Assitance Animal provided?"
yesno: IDWasShown
---
question: "When did the incident occur?"
subquestion: "This defaults to todayâ€™s date, please change as required"
fields:
  - Date: inc_date
    datatype: date
    default: |
      ${ todays_date }
---
question: "When did the incident occur?"
subquestion: "This defaults to current time, please change as required"
fields:
  - Time: inc_time
    datatype: time
    default: |
      ${ current_time }
---
question: Unfortunately, as ${pronoun} did not provide evidence of your Assistance Animal's accreditation, this refusal is not unlawful under s 54 of the Disability Discrimination Act 1992 (Cth). If you continue, you may be unsucessful in reporting this refusal.
subquestion: |
  Knowing this, would you like to proceed anyway?
field: notUnlawful
buttons:
  - Exit: exit
  - Continue: continue
---
question: Do you have any further supporting evidence of this incident that you would like to attach to this report?
yesno: supporting_evidence
---
question: Please add any files. This may include booking confirmation, screenshots, photos, videos, or any relevant documentation.
fields:
  - Attachments: attached_evidence
    datatype: file
---
mandatory: True
event: review_screen
question: Review your details  
subquestion: |
  Questions  | Answers
  -------|---------
  % if submitter == "myself":
  Reporting on your own behalf?  | Yes
  % endif
  % if not submitter == "myself":
  Reporting on your own behalf?  | No
  Submitter's Name  | ${s_fname} ${s_lname}
  Submitter's relation to refused person  | ${submitter}
  % endif
  Refused person's name | ${pz_fname} ${pz_lname}
  Refused person's email | ${pz_email}
  Refused person's phone number | ${pz_phoneno}
buttons:
  - Generate Report: continue
---
mandatory: True
question: Here is your document.
attachment:
  docx template file: docassembleproject.docx
---
template: notification
subject: |
  Greetings, ${ pz_fname }!
content: |
  This is an e-mail sent from a
  **docassemble** interview.

  Have a nice day!
